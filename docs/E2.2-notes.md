# E2.2 Notes â€” Frontend RFQ/Offer Submission

## What Changed
- Added frontend shortcodes:
  - `[oliveb2b_offer_form]`
  - `[oliveb2b_rfq_form]`
- Added secure submission handlers via `admin-post.php`:
  - `oliveb2b_submit_offer`
  - `oliveb2b_submit_rfq`
- Added capability-aware behavior:
  - Not logged in: login prompt
  - Logged in without capability: permission message
  - Logged in with capability: form submission enabled
- Added nonce validation, sanitization, and validation for all submission fields.
- Offer submissions now:
  - set `olive_verified=0` by default
  - attempt to link to the current user supplier profile (`olive_supplier_id`)
  - copy supplier coordinates to support near-me filtering
- Seeder now creates `Marketplace Submit` page at `/marketplace-submit/` with both shortcodes.

## How To Test
1. Run seed:
   - `docker compose run --rm --user 0:0 --entrypoint wp wpcli oliveb2b seed --reset --allow-root --path=/var/www/html`
2. Visit:
   - `http://localhost:8080/marketplace-submit/`
3. As guest:
   - Verify login prompt is shown.
4. As Buyer role:
   - Verify RFQ form is usable.
   - Verify Offer form shows permission warning.
5. As Supplier/Professional role:
   - Verify Offer form is usable.
   - Verify RFQ form shows permission warning.
